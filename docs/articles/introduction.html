<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Demonstration of tidyext • tidyext!</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Demonstration of tidyext">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidyext!</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction.html">Introduction to tidyext</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/m-clark">
    <span class="fa fa-github-alt"></span>
     
  </a>
</li>
<li>
  <a href="https://m-clark.github.io">
    <span class="fa fa-empire"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Demonstration of tidyext</h1>
                        <h4 class="author">Michel Clark</h4>
            
            <h4 class="date"><span style="font-style:normal;font-family:'Open Sans'">2019-07-16</span></h4>
      
      <small class="dont-index">Source: <a href="https://github.com/m-clark/tidyext/blob/master/vignettes/introduction.Rmd"><code>vignettes/introduction.Rmd</code></a></small>
      <div class="hidden name"><code>introduction.Rmd</code></div>

    </div>

    
    
<div id="getting-started-with-tidyext" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-started-with-tidyext" class="anchor"></a>Getting started with tidyext</h1>
<div id="data-summaries" class="section level2">
<h2 class="hasAnchor">
<a href="#data-summaries" class="anchor"></a>Data Summaries</h2>
<p>To begin, we can load up the <span class="pack">tidyverse</span> and this package. I’ll also create some data that will be useful for demonstration.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidyverse); <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tidyext)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">8675309</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">df1 &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">  <span class="dt">g1 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/factor">factor</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">50</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>), <span class="dt">labels=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'a'</span>,<span class="st">'b'</span>)),</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">  <span class="dt">g2 =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">50</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">  <span class="dt">a =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">50</span>),</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">  <span class="dt">b =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Poisson">rpois</a></span>(<span class="dv">50</span>, <span class="dv">10</span>),</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">  <span class="dt">c =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample</a></span>(letters, <span class="dv">50</span>, <span class="dt">replace=</span><span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">  <span class="dt">d =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(T,F), <span class="dv">50</span>, <span class="dt">replace=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">)</a>
<a class="sourceLine" id="cb1-11" data-line-number="11"></a>
<a class="sourceLine" id="cb1-12" data-line-number="12">df_miss =<span class="st"> </span>df1</a>
<a class="sourceLine" id="cb1-13" data-line-number="13">df_miss[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample</a></span>(<span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(df1), <span class="dv">10</span>), <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample</a></span>(<span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">ncol</a></span>(df1), <span class="dv">3</span>)] =<span class="st"> </span><span class="ot">NA</span></a></code></pre></div>
<p>We can start by getting a quick numerical summary for a single column. As the name suggests, this will only work with numeric data.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="../reference/num_summary.html">num_summary</a></span>(mtcars<span class="op">$</span>mpg)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">   N Mean SD  Min   Q1 Median   Q3  Max Missing</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="dv">1</span> <span class="dv">32</span> <span class="fl">20.1</span>  <span class="dv">6</span> <span class="fl">10.4</span> <span class="fl">15.4</span>   <span class="fl">19.2</span> <span class="fl">22.8</span> <span class="fl">33.9</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw"><a href="../reference/num_summary.html">num_summary</a></span>(df_miss<span class="op">$</span>a, <span class="dt">extra =</span> T)</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">   N Mean SD  Min   Q1 Median  Q3 Max Missing Distinct Zeros</a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="dv">1</span> <span class="dv">40</span>    <span class="dv">0</span>  <span class="dv">1</span> <span class="fl">-2.6</span> <span class="fl">-0.9</span>    <span class="fl">0.1</span> <span class="fl">0.6</span> <span class="fl">1.7</span>      <span class="dv">10</span>       <span class="dv">41</span>     <span class="dv">0</span></a></code></pre></div>
<p>Note that the result’s class is a <span class="objclass">data.frame</span>, which makes it easy to work with.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">x =<span class="st"> </span><span class="kw"><a href="../reference/num_summary.html">num_summary</a></span>(mtcars<span class="op">$</span>mpg)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">glimpse</span>(x)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">Observations<span class="op">:</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">Variables<span class="op">:</span><span class="st"> </span><span class="dv">9</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="op">$</span><span class="st"> </span>N       <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">32</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="op">$</span><span class="st"> </span>Mean    <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">20.1</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="op">$</span><span class="st"> </span>SD      <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="op">$</span><span class="st"> </span>Min     <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">10.4</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="op">$</span><span class="st"> </span>Q1      <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">15.4</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="op">$</span><span class="st"> </span>Median  <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">19.2</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="op">$</span><span class="st"> </span>Q3      <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">22.8</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="op">$</span><span class="st"> </span>Max     <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="fl">33.9</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="op">$</span><span class="st"> </span>Missing <span class="op">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"></a>
<a class="sourceLine" id="cb3-15" data-line-number="15">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="st">  </span><span class="kw">map_dfr</span>(num_summary, <span class="dt">.id =</span> <span class="st">'Variable'</span>)</a>
<a class="sourceLine" id="cb3-17" data-line-number="17">   Variable  N  Mean    SD  Min    Q1 Median    Q3   Max Missing</a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="dv">1</span>       mpg <span class="dv">32</span>  <span class="fl">20.1</span>   <span class="fl">6.0</span> <span class="fl">10.4</span>  <span class="fl">15.4</span>   <span class="fl">19.2</span>  <span class="fl">22.8</span>  <span class="fl">33.9</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="dv">2</span>       cyl <span class="dv">32</span>   <span class="fl">6.2</span>   <span class="fl">1.8</span>  <span class="fl">4.0</span>   <span class="fl">4.0</span>    <span class="fl">6.0</span>   <span class="fl">8.0</span>   <span class="fl">8.0</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="dv">3</span>      disp <span class="dv">32</span> <span class="fl">230.7</span> <span class="fl">123.9</span> <span class="fl">71.1</span> <span class="fl">120.8</span>  <span class="fl">196.3</span> <span class="fl">326.0</span> <span class="fl">472.0</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="dv">4</span>        hp <span class="dv">32</span> <span class="fl">146.7</span>  <span class="fl">68.6</span> <span class="fl">52.0</span>  <span class="fl">96.5</span>  <span class="fl">123.0</span> <span class="fl">180.0</span> <span class="fl">335.0</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="dv">5</span>      drat <span class="dv">32</span>   <span class="fl">3.6</span>   <span class="fl">0.5</span>  <span class="fl">2.8</span>   <span class="fl">3.1</span>    <span class="fl">3.7</span>   <span class="fl">3.9</span>   <span class="fl">4.9</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="dv">6</span>        wt <span class="dv">32</span>   <span class="fl">3.2</span>   <span class="fl">1.0</span>  <span class="fl">1.5</span>   <span class="fl">2.6</span>    <span class="fl">3.3</span>   <span class="fl">3.6</span>   <span class="fl">5.4</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="dv">7</span>      qsec <span class="dv">32</span>  <span class="fl">17.8</span>   <span class="fl">1.8</span> <span class="fl">14.5</span>  <span class="fl">16.9</span>   <span class="fl">17.7</span>  <span class="fl">18.9</span>  <span class="fl">22.9</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="dv">8</span>        vs <span class="dv">32</span>   <span class="fl">0.4</span>   <span class="fl">0.5</span>  <span class="fl">0.0</span>   <span class="fl">0.0</span>    <span class="fl">0.0</span>   <span class="fl">1.0</span>   <span class="fl">1.0</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="dv">9</span>        am <span class="dv">32</span>   <span class="fl">0.4</span>   <span class="fl">0.5</span>  <span class="fl">0.0</span>   <span class="fl">0.0</span>    <span class="fl">0.0</span>   <span class="fl">1.0</span>   <span class="fl">1.0</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="dv">10</span>     gear <span class="dv">32</span>   <span class="fl">3.7</span>   <span class="fl">0.7</span>  <span class="fl">3.0</span>   <span class="fl">3.0</span>    <span class="fl">4.0</span>   <span class="fl">4.0</span>   <span class="fl">5.0</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="dv">11</span>     carb <span class="dv">32</span>   <span class="fl">2.8</span>   <span class="fl">1.6</span>  <span class="fl">1.0</span>   <span class="fl">2.0</span>    <span class="fl">2.0</span>   <span class="fl">4.0</span>   <span class="fl">8.0</span>       <span class="dv">0</span></a></code></pre></div>
<p>There are also functions for summarizing missingness.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/sum_NA.html">sum_NA</a></span>(df_miss<span class="op">$</span>a)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">[<span class="dv">1</span>] <span class="dv">10</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="kw"><a href="../reference/sum_NA.html">sum_blank</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(letters, <span class="st">''</span>, <span class="st">'   '</span>))</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">[<span class="dv">1</span>] <span class="dv">2</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="kw"><a href="../reference/sum_NA.html">sum_NaN</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="ot">NaN</span>, <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">[<span class="dv">1</span>] <span class="dv">1</span></a></code></pre></div>
<p>When dealing with a data frame of mixed types we can use the <span class="func">describe_*</span> functions.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/describe_all.html">describe_all</a></span>(df1)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="op">$</span><span class="st">`</span><span class="dt">Numeric Variables</span><span class="st">`</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">  Variable  N Mean   SD  Min    Q1 Median    Q3   Max Missing</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="dv">1</span>       g2 <span class="dv">50</span> <span class="fl">2.54</span> <span class="fl">1.13</span>  <span class="fl">1.0</span>  <span class="fl">2.00</span>   <span class="fl">3.00</span>  <span class="fl">3.75</span>  <span class="fl">4.00</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="dv">2</span>        a <span class="dv">50</span> <span class="fl">0.00</span> <span class="fl">1.00</span> <span class="fl">-2.6</span> <span class="fl">-0.84</span>   <span class="fl">0.11</span>  <span class="fl">0.69</span>  <span class="fl">2.02</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="dv">3</span>        b <span class="dv">50</span> <span class="fl">9.98</span> <span class="fl">3.07</span>  <span class="fl">4.0</span>  <span class="fl">7.25</span>  <span class="fl">10.00</span> <span class="fl">12.00</span> <span class="fl">17.00</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="op">$</span><span class="st">`</span><span class="dt">Categorical Variables</span><span class="st">`</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co"># A tibble: 29 x 4</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10">   Variable Group Frequency   <span class="st">`</span><span class="dt">%</span><span class="st">`</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="st"> </span><span class="dv">1</span> g1       a            <span class="dv">25</span>    <span class="dv">50</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"> <span class="dv">2</span> g1       b            <span class="dv">25</span>    <span class="dv">50</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"> <span class="dv">3</span> c        n             <span class="dv">5</span>    <span class="dv">10</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"> <span class="dv">4</span> c        v             <span class="dv">4</span>     <span class="dv">8</span></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"> <span class="dv">5</span> c        e             <span class="dv">3</span>     <span class="dv">6</span></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"> <span class="dv">6</span> c        i             <span class="dv">3</span>     <span class="dv">6</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18"> <span class="dv">7</span> c        j             <span class="dv">3</span>     <span class="dv">6</span></a>
<a class="sourceLine" id="cb5-19" data-line-number="19"> <span class="dv">8</span> c        m             <span class="dv">3</span>     <span class="dv">6</span></a>
<a class="sourceLine" id="cb5-20" data-line-number="20"> <span class="dv">9</span> c        r             <span class="dv">3</span>     <span class="dv">6</span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"><span class="dv">10</span> c        c             <span class="dv">2</span>     <span class="dv">4</span></a>
<a class="sourceLine" id="cb5-22" data-line-number="22"><span class="co"># … with 19 more rows</span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23"></a>
<a class="sourceLine" id="cb5-24" data-line-number="24"><span class="kw"><a href="../reference/describe_all.html">describe_all_cat</a></span>(df1)</a>
<a class="sourceLine" id="cb5-25" data-line-number="25"><span class="co"># A tibble: 29 x 4</span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26">   Variable Group Frequency   <span class="st">`</span><span class="dt">%</span><span class="st">`</span></a>
<a class="sourceLine" id="cb5-27" data-line-number="27">   <span class="op">&lt;</span>chr<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb5-28" data-line-number="28"><span class="st"> </span><span class="dv">1</span> g1       a            <span class="dv">25</span>    <span class="dv">50</span></a>
<a class="sourceLine" id="cb5-29" data-line-number="29"> <span class="dv">2</span> g1       b            <span class="dv">25</span>    <span class="dv">50</span></a>
<a class="sourceLine" id="cb5-30" data-line-number="30"> <span class="dv">3</span> c        n             <span class="dv">5</span>    <span class="dv">10</span></a>
<a class="sourceLine" id="cb5-31" data-line-number="31"> <span class="dv">4</span> c        v             <span class="dv">4</span>     <span class="dv">8</span></a>
<a class="sourceLine" id="cb5-32" data-line-number="32"> <span class="dv">5</span> c        e             <span class="dv">3</span>     <span class="dv">6</span></a>
<a class="sourceLine" id="cb5-33" data-line-number="33"> <span class="dv">6</span> c        i             <span class="dv">3</span>     <span class="dv">6</span></a>
<a class="sourceLine" id="cb5-34" data-line-number="34"> <span class="dv">7</span> c        j             <span class="dv">3</span>     <span class="dv">6</span></a>
<a class="sourceLine" id="cb5-35" data-line-number="35"> <span class="dv">8</span> c        m             <span class="dv">3</span>     <span class="dv">6</span></a>
<a class="sourceLine" id="cb5-36" data-line-number="36"> <span class="dv">9</span> c        r             <span class="dv">3</span>     <span class="dv">6</span></a>
<a class="sourceLine" id="cb5-37" data-line-number="37"><span class="dv">10</span> c        c             <span class="dv">2</span>     <span class="dv">4</span></a>
<a class="sourceLine" id="cb5-38" data-line-number="38"><span class="co"># … with 19 more rows</span></a>
<a class="sourceLine" id="cb5-39" data-line-number="39"></a>
<a class="sourceLine" id="cb5-40" data-line-number="40"><span class="kw"><a href="../reference/describe_all.html">describe_all_num</a></span>(df1, <span class="dt">digits =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb5-41" data-line-number="41">  Variable  N Mean  SD  Min   Q1 Median   Q3 Max Missing</a>
<a class="sourceLine" id="cb5-42" data-line-number="42"><span class="dv">1</span>       g2 <span class="dv">50</span>  <span class="fl">2.5</span> <span class="fl">1.1</span>  <span class="fl">1.0</span>  <span class="fl">2.0</span>    <span class="fl">3.0</span>  <span class="fl">3.8</span>   <span class="dv">4</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb5-43" data-line-number="43"><span class="dv">2</span>        a <span class="dv">50</span>  <span class="fl">0.0</span> <span class="fl">1.0</span> <span class="fl">-2.6</span> <span class="fl">-0.8</span>    <span class="fl">0.1</span>  <span class="fl">0.7</span>   <span class="dv">2</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb5-44" data-line-number="44"><span class="dv">3</span>        b <span class="dv">50</span> <span class="fl">10.0</span> <span class="fl">3.1</span>  <span class="fl">4.0</span>  <span class="fl">7.2</span>   <span class="fl">10.0</span> <span class="fl">12.0</span>  <span class="dv">17</span>       <span class="dv">0</span></a></code></pre></div>
<p>Note how the categorical data result is just as ready for visualization as the numeric, as it can be filtered by the <code>Variable</code> column. It also has an option to deal with <span class="objclass">NA</span> and some other stuff.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="../reference/describe_all.html">describe_all_cat</a></span>(df_miss, <span class="dt">include_NAcat =</span> <span class="ot">TRUE</span>, <span class="dt">sort_by_freq =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(Variable <span class="op">==</span><span class="st"> 'g1'</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>Group, <span class="dt">y=</span><span class="st">`</span><span class="dt">%</span><span class="st">`</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_col</span>(<span class="dt">width =</span> <span class="fl">.25</span>)</a></code></pre></div>
<p><img src="introduction_files/figure-html/describe_cat-1.svg" width="50%" style="display: block; margin: auto;"></p>
<p>Typically during data processing, we are performing grouped operations. As such there is a corresponding <span class="func">num_by</span> and <span class="func">cat_by</span> to provide the same information by some grouping variable. This basically is saving you from doing <code>group_by %&gt;% summarize()</code> and creating variables for all these values. It can also take a set of variables to summarize using <span class="func">vars</span>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">df_miss <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/num_by.html">num_by</a></span>(a, <span class="dt">group_var =</span> g2)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co"># A tibble: 5 x 11</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4">     g2 Variable     N  Mean    SD   Min    Q1 Median    Q3   Max Missing</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">  <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="dv">1</span>     <span class="dv">2</span> a            <span class="dv">9</span>  <span class="fl">-0.2</span>   <span class="fl">0.9</span>  <span class="fl">-2.1</span>  <span class="fl">-0.8</span>    <span class="fl">0.1</span>   <span class="fl">0.5</span>   <span class="fl">0.6</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="dv">2</span>     <span class="dv">3</span> a           <span class="dv">11</span>  <span class="fl">-0.2</span>   <span class="fl">1.1</span>  <span class="fl">-2.6</span>  <span class="fl">-0.8</span>   <span class="fl">-0.2</span>   <span class="fl">0.4</span>   <span class="fl">1.7</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="dv">3</span>    <span class="ot">NA</span> a            <span class="dv">0</span> <span class="ot">NaN</span>    <span class="ot">NA</span>    <span class="ot">NA</span>    <span class="ot">NA</span>     <span class="ot">NA</span>    <span class="ot">NA</span>    <span class="ot">NA</span>        <span class="dv">10</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="dv">4</span>     <span class="dv">1</span> a           <span class="dv">10</span>   <span class="fl">0.1</span>   <span class="fl">1.1</span>  <span class="fl">-1.3</span>  <span class="fl">-0.9</span>    <span class="fl">0.4</span>   <span class="dv">1</span>     <span class="fl">1.6</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="dv">5</span>     <span class="dv">4</span> a           <span class="dv">10</span>   <span class="fl">0.3</span>   <span class="fl">0.9</span>  <span class="fl">-1.1</span>  <span class="fl">-0.3</span>    <span class="fl">0.2</span>   <span class="dv">1</span>     <span class="fl">1.5</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"></a>
<a class="sourceLine" id="cb7-12" data-line-number="12">df_miss <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="../reference/num_by.html">num_by</a></span>(<span class="kw"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span>(a, b), <span class="dt">group_var =</span> g2)</a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co"># A tibble: 10 x 11</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15">      g2 Variable     N  Mean    SD   Min    Q1 Median    Q3   Max Missing</a>
<a class="sourceLine" id="cb7-16" data-line-number="16">   <span class="op">&lt;</span>int<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">   </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="st"> </span><span class="dv">1</span>     <span class="dv">2</span> a            <span class="dv">9</span>  <span class="fl">-0.2</span>   <span class="fl">0.9</span>  <span class="fl">-2.1</span>  <span class="fl">-0.8</span>    <span class="fl">0.1</span>   <span class="fl">0.5</span>   <span class="fl">0.6</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"> <span class="dv">2</span>     <span class="dv">2</span> b            <span class="dv">9</span>  <span class="fl">10.2</span>   <span class="fl">2.6</span>   <span class="dv">6</span>     <span class="dv">9</span>     <span class="dv">10</span>    <span class="dv">12</span>    <span class="dv">14</span>         <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"> <span class="dv">3</span>     <span class="dv">3</span> a           <span class="dv">11</span>  <span class="fl">-0.2</span>   <span class="fl">1.1</span>  <span class="fl">-2.6</span>  <span class="fl">-0.8</span>   <span class="fl">-0.2</span>   <span class="fl">0.4</span>   <span class="fl">1.7</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"> <span class="dv">4</span>     <span class="dv">3</span> b           <span class="dv">11</span>   <span class="fl">9.9</span>   <span class="fl">3.1</span>   <span class="dv">5</span>     <span class="dv">7</span>     <span class="dv">10</span>    <span class="dv">12</span>    <span class="dv">14</span>         <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"> <span class="dv">5</span>    <span class="ot">NA</span> a            <span class="dv">0</span> <span class="ot">NaN</span>    <span class="ot">NA</span>    <span class="ot">NA</span>    <span class="ot">NA</span>     <span class="ot">NA</span>    <span class="ot">NA</span>    <span class="ot">NA</span>        <span class="dv">10</span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"> <span class="dv">6</span>    <span class="ot">NA</span> b           <span class="dv">10</span>   <span class="fl">9.2</span>   <span class="fl">3.7</span>   <span class="dv">4</span>     <span class="dv">7</span>      <span class="fl">9.5</span>  <span class="fl">11.8</span>  <span class="dv">15</span>         <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"> <span class="dv">7</span>     <span class="dv">1</span> a           <span class="dv">10</span>   <span class="fl">0.1</span>   <span class="fl">1.1</span>  <span class="fl">-1.3</span>  <span class="fl">-0.9</span>    <span class="fl">0.4</span>   <span class="dv">1</span>     <span class="fl">1.6</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24"> <span class="dv">8</span>     <span class="dv">1</span> b           <span class="dv">10</span>  <span class="fl">11.6</span>   <span class="fl">2.6</span>   <span class="dv">8</span>    <span class="fl">10.2</span>   <span class="dv">11</span>    <span class="fl">12.8</span>  <span class="dv">17</span>         <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-25" data-line-number="25"> <span class="dv">9</span>     <span class="dv">4</span> a           <span class="dv">10</span>   <span class="fl">0.3</span>   <span class="fl">0.9</span>  <span class="fl">-1.1</span>  <span class="fl">-0.3</span>    <span class="fl">0.2</span>   <span class="dv">1</span>     <span class="fl">1.5</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="dv">10</span>     <span class="dv">4</span> b           <span class="dv">10</span>   <span class="dv">9</span>     <span class="fl">3.1</span>   <span class="dv">5</span>     <span class="fl">7.2</span>    <span class="dv">8</span>    <span class="fl">11.2</span>  <span class="dv">15</span>         <span class="dv">0</span></a></code></pre></div>
<p>For categorical variables summarized by group, you can select whether the resulting percentage is irrespective of the grouping.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">df1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/num_by.html">cat_by</a></span>(d, </a>
<a class="sourceLine" id="cb8-3" data-line-number="3">         <span class="dt">group_var =</span> g1, </a>
<a class="sourceLine" id="cb8-4" data-line-number="4">         <span class="dt">perc_by_group =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co"># A tibble: 4 x 5</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co"># Groups:   g1 [2]</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7">  g1    d         N <span class="st">`</span><span class="dt">% of Total</span><span class="st">`</span> <span class="st">`</span><span class="dt">% of g1</span><span class="st">`</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8">  <span class="op">&lt;</span>fct<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">     </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="dv">1</span> a     <span class="ot">FALSE</span>    <span class="dv">10</span>           <span class="dv">20</span>        <span class="dv">40</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="dv">2</span> a     <span class="ot">TRUE</span>     <span class="dv">15</span>           <span class="dv">30</span>        <span class="dv">60</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="dv">3</span> b     <span class="ot">FALSE</span>    <span class="dv">10</span>           <span class="dv">20</span>        <span class="dv">40</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="dv">4</span> b     <span class="ot">TRUE</span>     <span class="dv">15</span>           <span class="dv">30</span>        <span class="dv">60</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"></a>
<a class="sourceLine" id="cb8-14" data-line-number="14">df1 <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="st">  </span><span class="kw"><a href="../reference/num_by.html">cat_by</a></span>(d, </a>
<a class="sourceLine" id="cb8-16" data-line-number="16">         <span class="dt">group_var =</span> g1, </a>
<a class="sourceLine" id="cb8-17" data-line-number="17">         <span class="dt">perc_by_group =</span> <span class="ot">FALSE</span>, </a>
<a class="sourceLine" id="cb8-18" data-line-number="18">         <span class="dt">sort_by_group =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb8-19" data-line-number="19"><span class="co"># A tibble: 4 x 4</span></a>
<a class="sourceLine" id="cb8-20" data-line-number="20">  g1    d         N <span class="st">`</span><span class="dt">% of Total</span><span class="st">`</span></a>
<a class="sourceLine" id="cb8-21" data-line-number="21">  <span class="op">&lt;</span>fct<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>int<span class="op">&gt;</span><span class="st">        </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb8-22" data-line-number="22"><span class="dv">1</span> a     <span class="ot">FALSE</span>    <span class="dv">10</span>           <span class="dv">20</span></a>
<a class="sourceLine" id="cb8-23" data-line-number="23"><span class="dv">2</span> a     <span class="ot">TRUE</span>     <span class="dv">15</span>           <span class="dv">30</span></a>
<a class="sourceLine" id="cb8-24" data-line-number="24"><span class="dv">3</span> b     <span class="ot">FALSE</span>    <span class="dv">10</span>           <span class="dv">20</span></a>
<a class="sourceLine" id="cb8-25" data-line-number="25"><span class="dv">4</span> b     <span class="ot">TRUE</span>     <span class="dv">15</span>           <span class="dv">30</span></a></code></pre></div>
</div>
<div id="data-processing" class="section level2">
<h2 class="hasAnchor">
<a href="#data-processing" class="anchor"></a>Data Processing</h2>
<p>In addition there are some functions for data processing. We can start with the simple one-hot encoding function.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../reference/onehot.html">onehot</a></span>(iris) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="st">  </span><span class="kw">slice</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">51</span><span class="op">:</span><span class="dv">52</span>, <span class="dv">101</span><span class="op">:</span><span class="dv">102</span>))</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">  Sepal.Length Sepal.Width Petal.Length Petal.Width Species_setosa Species_versicolor Species_virginica</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="dv">1</span>          <span class="fl">5.1</span>         <span class="fl">3.5</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span>              <span class="dv">1</span>                  <span class="dv">0</span>                 <span class="dv">0</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="dv">2</span>          <span class="fl">4.9</span>         <span class="fl">3.0</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span>              <span class="dv">1</span>                  <span class="dv">0</span>                 <span class="dv">0</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="dv">3</span>          <span class="fl">7.0</span>         <span class="fl">3.2</span>          <span class="fl">4.7</span>         <span class="fl">1.4</span>              <span class="dv">0</span>                  <span class="dv">1</span>                 <span class="dv">0</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="dv">4</span>          <span class="fl">6.4</span>         <span class="fl">3.2</span>          <span class="fl">4.5</span>         <span class="fl">1.5</span>              <span class="dv">0</span>                  <span class="dv">1</span>                 <span class="dv">0</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="dv">5</span>          <span class="fl">6.3</span>         <span class="fl">3.3</span>          <span class="fl">6.0</span>         <span class="fl">2.5</span>              <span class="dv">0</span>                  <span class="dv">0</span>                 <span class="dv">1</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="dv">6</span>          <span class="fl">5.8</span>         <span class="fl">2.7</span>          <span class="fl">5.1</span>         <span class="fl">1.9</span>              <span class="dv">0</span>                  <span class="dv">0</span>                 <span class="dv">1</span></a></code></pre></div>
<p>It can do it sparsely.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">iris <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="st">  </span><span class="kw">slice</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">51</span><span class="op">:</span><span class="dv">52</span>, <span class="dv">101</span><span class="op">:</span><span class="dv">102</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/onehot.html">onehot</a></span>(<span class="dt">sparse =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="dv">6</span> x <span class="dv">3</span> sparse Matrix of class <span class="st">"dgCMatrix"</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5">  Species_xsetosa Species_xversicolor Species_xvirginica</a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="dv">1</span>               <span class="dv">1</span>                   .                  .</a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="dv">2</span>               <span class="dv">1</span>                   .                  .</a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="dv">3</span>               .                   <span class="dv">1</span>                  .</a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="dv">4</span>               .                   <span class="dv">1</span>                  .</a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="dv">5</span>               .                   .                  <span class="dv">1</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="dv">6</span>               .                   .                  <span class="dv">1</span></a></code></pre></div>
<p>Choose a specific variable, whether you want to keep the others, and how to deal with NA.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">df_miss <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/onehot.html">onehot</a></span>(<span class="dt">var =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'g1'</span>, <span class="st">'g2'</span>), <span class="dt">nas =</span> <span class="st">'na.omit'</span>, <span class="dt">keep.original =</span> <span class="ot">FALSE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>()</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">           a  b c     d g1_a g1_b g2_<span class="dv">1</span> g2_<span class="dv">2</span> g2_<span class="dv">3</span> g2_<span class="dv">4</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="dv">1</span>  <span class="fl">0.1348980</span> <span class="dv">12</span> o <span class="ot">FALSE</span>    <span class="dv">0</span>    <span class="dv">1</span>    <span class="dv">0</span>    <span class="dv">1</span>    <span class="dv">0</span>    <span class="dv">0</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="dv">2</span>  <span class="fl">0.1175821</span>  <span class="dv">5</span> r  <span class="ot">TRUE</span>    <span class="dv">1</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">1</span>    <span class="dv">0</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="dv">3</span> <span class="fl">-0.8255891</span> <span class="dv">14</span> p <span class="ot">FALSE</span>    <span class="dv">0</span>    <span class="dv">1</span>    <span class="dv">0</span>    <span class="dv">1</span>    <span class="dv">0</span>    <span class="dv">0</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="dv">4</span> <span class="fl">-2.1352363</span>  <span class="dv">7</span> l <span class="ot">FALSE</span>    <span class="dv">1</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">1</span>    <span class="dv">0</span>    <span class="dv">0</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="dv">5</span>  <span class="fl">0.2142085</span> <span class="dv">10</span> n  <span class="ot">TRUE</span>    <span class="dv">0</span>    <span class="dv">1</span>    <span class="dv">0</span>    <span class="dv">1</span>    <span class="dv">0</span>    <span class="dv">0</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="dv">6</span> <span class="fl">-0.9470681</span> <span class="dv">11</span> s <span class="ot">FALSE</span>    <span class="dv">1</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">0</span>    <span class="dv">1</span>    <span class="dv">0</span></a></code></pre></div>
<p>With <span class="func">create_prediction_data</span>, we can quickly create data for use with <span class="func">predict</span> after a model. By default it will put numeric variables at their mean, and categorical variables at their most common category.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="../reference/create_prediction_data.html">create_prediction_data</a></span>(iris)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">  Sepal.Length Sepal.Width Petal.Length Petal.Width Species</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="dv">1</span>     <span class="fl">5.843333</span>    <span class="fl">3.057333</span>        <span class="fl">3.758</span>    <span class="fl">1.199333</span>  setosa</a>
<a class="sourceLine" id="cb12-4" data-line-number="4"></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="kw"><a href="../reference/create_prediction_data.html">create_prediction_data</a></span>(iris, <span class="dt">num =</span> <span class="cf">function</span>(x) <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/quantile">quantile</a></span>(x, <span class="dt">p=</span>.<span class="dv">25</span>))</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">  Sepal.Length Sepal.Width Petal.Length Petal.Width Species</a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="dv">1</span>          <span class="fl">5.1</span>         <span class="fl">2.8</span>          <span class="fl">1.6</span>         <span class="fl">0.3</span>  setosa</a></code></pre></div>
<p>We can also supply specific values.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">cd =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">cyl=</span><span class="dv">4</span>, <span class="dt">hp=</span><span class="dv">100</span>)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw"><a href="../reference/create_prediction_data.html">create_prediction_data</a></span>(mtcars, <span class="dt">conditional_data =</span> cd)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">  cyl  hp      mpg     disp     drat      wt     qsec     vs      am   gear   carb</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="dv">1</span>   <span class="dv">4</span> <span class="dv">100</span> <span class="fl">20.09062</span> <span class="fl">230.7219</span> <span class="fl">3.596563</span> <span class="fl">3.21725</span> <span class="fl">17.84875</span> <span class="fl">0.4375</span> <span class="fl">0.40625</span> <span class="fl">3.6875</span> <span class="fl">2.8125</span></a></code></pre></div>
<p>For modeling purposes, we often want to center or scale the data, take logs etc. The <span class="func">pre_process</span> function will standardize numeric data by default.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw"><a href="../reference/pre_process.html">pre_process</a></span>(df1)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co"># A tibble: 50 x 6</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3">   g1        g2      a        b c     d    </a>
<a class="sourceLine" id="cb14-4" data-line-number="4">   <span class="op">&lt;</span>fct<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">  </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st">    </span><span class="er">&lt;</span>dbl<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>chr<span class="op">&gt;</span><span class="st"> </span><span class="er">&lt;</span>lgl<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="st"> </span><span class="dv">1</span> b     <span class="fl">-0.478</span>  <span class="fl">0.133</span>  <span class="fl">0.659</span>   o     <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"> <span class="dv">2</span> a      <span class="fl">0.408</span>  <span class="fl">0.116</span> <span class="fl">-1.62</span>    r     <span class="ot">TRUE</span> </a>
<a class="sourceLine" id="cb14-7" data-line-number="7"> <span class="dv">3</span> b     <span class="fl">-0.478</span> <span class="fl">-0.828</span>  <span class="fl">1.31</span>    p     <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"> <span class="dv">4</span> a     <span class="fl">-0.478</span> <span class="fl">-2.14</span>  <span class="fl">-0.972</span>   l     <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"> <span class="dv">5</span> b     <span class="fl">-0.478</span>  <span class="fl">0.212</span>  <span class="fl">0.00652</span> n     <span class="ot">TRUE</span> </a>
<a class="sourceLine" id="cb14-10" data-line-number="10"> <span class="dv">6</span> a      <span class="fl">0.408</span> <span class="fl">-0.949</span>  <span class="fl">0.333</span>   s     <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"> <span class="dv">7</span> a      <span class="fl">0.408</span> <span class="fl">-0.654</span> <span class="fl">-0.972</span>   i     <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"> <span class="dv">8</span> a     <span class="fl">-0.478</span>  <span class="fl">0.727</span> <span class="fl">-0.972</span>   n     <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"> <span class="dv">9</span> b     <span class="fl">-1.36</span>   <span class="fl">1.05</span>  <span class="fl">-1.95</span>    s     <span class="ot">TRUE</span> </a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="dv">10</span> a      <span class="fl">0.408</span>  <span class="fl">0.100</span> <span class="fl">-1.95</span>    j     <span class="ot">TRUE</span> </a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co"># … with 40 more rows</span></a></code></pre></div>
<p>Other options are to simply center the data (<code>scale_by = 0</code>), start some variables at zero (e.g. time indicators), log some variables (with chosen base), and scale some to range from zero to one.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="../reference/pre_process.html">pre_process</a></span>(mtcars, </a>
<a class="sourceLine" id="cb15-2" data-line-number="2">            <span class="dt">scale_by =</span> <span class="dv">0</span>, </a>
<a class="sourceLine" id="cb15-3" data-line-number="3">            <span class="dt">log_vars =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span>(mpg, wt), </a>
<a class="sourceLine" id="cb15-4" data-line-number="4">            <span class="dt">zero_start =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span>(cyl), </a>
<a class="sourceLine" id="cb15-5" data-line-number="5">            <span class="dt">zero_one =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span>(hp, <span class="kw">starts_with</span>(<span class="st">'d'</span>))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="../reference/describe_all.html">describe_all_num</a></span>()</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">   Variable  N Mean   SD   Min    Q1 Median   Q3  Max Missing</a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="dv">1</span>       mpg <span class="dv">32</span> <span class="fl">2.96</span> <span class="fl">0.30</span>  <span class="fl">2.34</span>  <span class="fl">2.74</span>   <span class="fl">2.95</span> <span class="fl">3.13</span> <span class="fl">3.52</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="dv">2</span>       cyl <span class="dv">32</span> <span class="fl">2.19</span> <span class="fl">1.79</span>  <span class="fl">0.00</span>  <span class="fl">0.00</span>   <span class="fl">2.00</span> <span class="fl">4.00</span> <span class="fl">4.00</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="dv">3</span>      disp <span class="dv">32</span> <span class="fl">0.40</span> <span class="fl">0.31</span>  <span class="fl">0.00</span>  <span class="fl">0.12</span>   <span class="fl">0.31</span> <span class="fl">0.64</span> <span class="fl">1.00</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="dv">4</span>        hp <span class="dv">32</span> <span class="fl">0.33</span> <span class="fl">0.24</span>  <span class="fl">0.00</span>  <span class="fl">0.16</span>   <span class="fl">0.25</span> <span class="fl">0.45</span> <span class="fl">1.00</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="dv">5</span>      drat <span class="dv">32</span> <span class="fl">0.39</span> <span class="fl">0.25</span>  <span class="fl">0.00</span>  <span class="fl">0.15</span>   <span class="fl">0.43</span> <span class="fl">0.53</span> <span class="fl">1.00</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"><span class="dv">6</span>        wt <span class="dv">32</span> <span class="fl">1.12</span> <span class="fl">0.32</span>  <span class="fl">0.41</span>  <span class="fl">0.95</span>   <span class="fl">1.20</span> <span class="fl">1.28</span> <span class="fl">1.69</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="dv">7</span>      qsec <span class="dv">32</span> <span class="fl">0.00</span> <span class="fl">1.79</span> <span class="fl">-3.35</span> <span class="fl">-0.96</span>  <span class="fl">-0.14</span> <span class="fl">1.05</span> <span class="fl">5.05</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"><span class="dv">8</span>        vs <span class="dv">32</span> <span class="fl">0.00</span> <span class="fl">0.50</span> <span class="fl">-0.44</span> <span class="fl">-0.44</span>  <span class="fl">-0.44</span> <span class="fl">0.56</span> <span class="fl">0.56</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb15-16" data-line-number="16"><span class="dv">9</span>        am <span class="dv">32</span> <span class="fl">0.00</span> <span class="fl">0.50</span> <span class="fl">-0.41</span> <span class="fl">-0.41</span>  <span class="fl">-0.41</span> <span class="fl">0.59</span> <span class="fl">0.59</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb15-17" data-line-number="17"><span class="dv">10</span>     gear <span class="dv">32</span> <span class="fl">0.00</span> <span class="fl">0.74</span> <span class="fl">-0.69</span> <span class="fl">-0.69</span>   <span class="fl">0.31</span> <span class="fl">0.31</span> <span class="fl">1.31</span>       <span class="dv">0</span></a>
<a class="sourceLine" id="cb15-18" data-line-number="18"><span class="dv">11</span>     carb <span class="dv">32</span> <span class="fl">0.00</span> <span class="fl">1.62</span> <span class="fl">-1.81</span> <span class="fl">-0.81</span>  <span class="fl">-0.81</span> <span class="fl">1.19</span> <span class="fl">5.19</span>       <span class="dv">0</span></a></code></pre></div>
<p>Note that center/standardizing is done to any numeric variables <em>not</em> chosen for <code>log</code>, <code>zero_start</code>, and <code>zero_one</code>.</p>
<p>Here’s a specific function you will probably never need, but will be glad to have if you do. Some data columns have multiple entries for each observation/cell. While it’s understandable why someone would do this, it’s not very good practice. This will split out the entries, or any particular combination of them, into their own indicator column.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">d =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">id =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">4</span>,</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">               <span class="dt">labs =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">'A-B'</span>, <span class="st">'B-C-D-E'</span>, <span class="st">'A-E'</span>, <span class="st">'D-E'</span>))</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw"><a href="../reference/combn_2_col.html">combn_2_col</a></span>(<span class="dt">data=</span>d, <span class="dt">var=</span><span class="st">'labs'</span>, <span class="dt">max_m=</span><span class="dv">2</span>, <span class="dt">sep =</span> <span class="st">'-'</span>, <span class="dt">collapse =</span> <span class="st">':'</span>, <span class="dt">toInteger =</span> T)</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">  id    labs                                                                                                combo A B A<span class="op">:</span>B C D E B<span class="op">:</span>C B<span class="op">:</span>D B<span class="op">:</span>E C<span class="op">:</span>D C<span class="op">:</span>E D<span class="op">:</span>E A<span class="op">:</span>E</a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="dv">1</span>  <span class="dv">1</span>     A<span class="op">-</span>B                                                                                            A, B, A<span class="op">:</span>B <span class="dv">1</span> <span class="dv">1</span>   <span class="dv">1</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="dv">2</span>  <span class="dv">2</span> B<span class="op">-</span>C<span class="op">-</span>D<span class="op">-</span>E B, C, D, E, B<span class="op">:</span>C, B<span class="op">:</span>D, B<span class="op">:</span>E, C<span class="op">:</span>D, C<span class="op">:</span>E, D<span class="op">:</span>E, B<span class="op">:</span>C, B<span class="op">:</span>D, B<span class="op">:</span>E, C<span class="op">:</span>D, C<span class="op">:</span>E, D<span class="op">:</span>E, B<span class="op">:</span>C, B<span class="op">:</span>D, B<span class="op">:</span>E, C<span class="op">:</span>D, C<span class="op">:</span>E, D<span class="op">:</span>E <span class="dv">0</span> <span class="dv">1</span>   <span class="dv">0</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span>   <span class="dv">1</span>   <span class="dv">1</span>   <span class="dv">1</span>   <span class="dv">1</span>   <span class="dv">1</span>   <span class="dv">1</span>   <span class="dv">0</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="dv">3</span>  <span class="dv">3</span>     A<span class="op">-</span>E                                                                                            A, E, A<span class="op">:</span>E <span class="dv">1</span> <span class="dv">0</span>   <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">1</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">1</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="dv">4</span>  <span class="dv">4</span>     D<span class="op">-</span>E                                                                                            D, E, D<span class="op">:</span>E <span class="dv">0</span> <span class="dv">0</span>   <span class="dv">0</span> <span class="dv">0</span> <span class="dv">1</span> <span class="dv">1</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">1</span>   <span class="dv">0</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="kw"><a href="../reference/combn_2_col.html">combn_2_col</a></span>(<span class="dt">data=</span>d, <span class="dt">var=</span><span class="st">'labs'</span>, <span class="dt">max_m=</span><span class="dv">2</span>, <span class="dt">sparse =</span> T)</a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="dv">4</span> x <span class="dv">13</span> sparse Matrix of class <span class="st">"dgCMatrix"</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12">   [[ suppressing <span class="dv">13</span> column names <span class="st">'A'</span>, <span class="st">'B'</span>, <span class="st">'A_B'</span> ... ]]</a>
<a class="sourceLine" id="cb16-13" data-line-number="13">                           </a>
<a class="sourceLine" id="cb16-14" data-line-number="14"><span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> . . . . . . . . . .</a>
<a class="sourceLine" id="cb16-15" data-line-number="15"><span class="dv">2</span> . <span class="dv">1</span> . <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">1</span> .</a>
<a class="sourceLine" id="cb16-16" data-line-number="16"><span class="dv">3</span> <span class="dv">1</span> . . . . <span class="dv">1</span> . . . . . . <span class="dv">1</span></a>
<a class="sourceLine" id="cb16-17" data-line-number="17"><span class="dv">4</span> . . . . <span class="dv">1</span> <span class="dv">1</span> . . . . . <span class="dv">1</span> .</a></code></pre></div>
<p>In addition, there is a function that makes <span class="pack">tidyr’s</span> <span class="func">spread</span> work like it should when you don’t have unique identifiers. I spent a lot of time coming up with the name for this one.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># initial example from spread</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">stocks_init &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(</a>
<a class="sourceLine" id="cb17-3" data-line-number="3">  <span class="dt">time =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/as.Date">as.Date</a></span>(<span class="st">'2009-01-01'</span>) <span class="op">+</span><span class="st"> </span><span class="dv">0</span><span class="op">:</span><span class="dv">9</span>,</a>
<a class="sourceLine" id="cb17-4" data-line-number="4">  <span class="dt">X =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">  <span class="dt">Y =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb17-6" data-line-number="6">  <span class="dt">Z =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">)</a>
<a class="sourceLine" id="cb17-8" data-line-number="8"></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="co"># a very common situation</span></a>
<a class="sourceLine" id="cb17-10" data-line-number="10">stocks &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(</a>
<a class="sourceLine" id="cb17-11" data-line-number="11">  <span class="dt">X =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb17-12" data-line-number="12">  <span class="dt">Y =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb17-13" data-line-number="13">  <span class="dt">Z =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb17-14" data-line-number="14">)</a>
<a class="sourceLine" id="cb17-15" data-line-number="15"></a>
<a class="sourceLine" id="cb17-16" data-line-number="16"></a>
<a class="sourceLine" id="cb17-17" data-line-number="17">stocksm_init &lt;-<span class="st"> </span>stocks_init <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-18" data-line-number="18"><span class="st">  </span><span class="kw">gather</span>(stock, price, <span class="op">-</span>time)</a>
<a class="sourceLine" id="cb17-19" data-line-number="19"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(stocksm_init)</a>
<a class="sourceLine" id="cb17-20" data-line-number="20">        time stock       price</a>
<a class="sourceLine" id="cb17-21" data-line-number="21"><span class="dv">1</span> <span class="dv">2009-01-01</span>     X  <span class="fl">0.09786637</span></a>
<a class="sourceLine" id="cb17-22" data-line-number="22"><span class="dv">2</span> <span class="dv">2009-01-02</span>     X <span class="fl">-0.07268211</span></a>
<a class="sourceLine" id="cb17-23" data-line-number="23"><span class="dv">3</span> <span class="dv">2009-01-03</span>     X <span class="fl">-0.01375654</span></a>
<a class="sourceLine" id="cb17-24" data-line-number="24"><span class="dv">4</span> <span class="dv">2009-01-04</span>     X <span class="fl">-2.72281902</span></a>
<a class="sourceLine" id="cb17-25" data-line-number="25"><span class="dv">5</span> <span class="dv">2009-01-05</span>     X  <span class="fl">0.41191338</span></a>
<a class="sourceLine" id="cb17-26" data-line-number="26"><span class="dv">6</span> <span class="dv">2009-01-06</span>     X  <span class="fl">1.23162468</span></a>
<a class="sourceLine" id="cb17-27" data-line-number="27"></a>
<a class="sourceLine" id="cb17-28" data-line-number="28">stocksm_init <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-29" data-line-number="29"><span class="st">  </span><span class="kw">spread</span>(stock, price)  <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-30" data-line-number="30"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>()                                 <span class="co"># works fine</span></a>
<a class="sourceLine" id="cb17-31" data-line-number="31">        time           X          Y         Z</a>
<a class="sourceLine" id="cb17-32" data-line-number="32"><span class="dv">1</span> <span class="dv">2009-01-01</span>  <span class="fl">0.09786637</span> <span class="fl">-3.1067803</span>  <span class="fl">4.115598</span></a>
<a class="sourceLine" id="cb17-33" data-line-number="33"><span class="dv">2</span> <span class="dv">2009-01-02</span> <span class="fl">-0.07268211</span>  <span class="fl">2.7425990</span> <span class="fl">-6.643963</span></a>
<a class="sourceLine" id="cb17-34" data-line-number="34"><span class="dv">3</span> <span class="dv">2009-01-03</span> <span class="fl">-0.01375654</span> <span class="fl">-1.2177186</span> <span class="fl">-3.671878</span></a>
<a class="sourceLine" id="cb17-35" data-line-number="35"><span class="dv">4</span> <span class="dv">2009-01-04</span> <span class="fl">-2.72281902</span>  <span class="fl">0.1097497</span> <span class="fl">-5.486397</span></a>
<a class="sourceLine" id="cb17-36" data-line-number="36"><span class="dv">5</span> <span class="dv">2009-01-05</span>  <span class="fl">0.41191338</span> <span class="fl">-2.2411176</span>  <span class="fl">3.706905</span></a>
<a class="sourceLine" id="cb17-37" data-line-number="37"><span class="dv">6</span> <span class="dv">2009-01-06</span>  <span class="fl">1.23162468</span>  <span class="fl">2.8402477</span> <span class="fl">-2.990143</span></a>
<a class="sourceLine" id="cb17-38" data-line-number="38"></a>
<a class="sourceLine" id="cb17-39" data-line-number="39"><span class="co"># no time</span></a>
<a class="sourceLine" id="cb17-40" data-line-number="40">stocksm &lt;-<span class="st"> </span>stocks <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-41" data-line-number="41"><span class="st">  </span><span class="kw">gather</span>(stock, price)</a>
<a class="sourceLine" id="cb17-42" data-line-number="42"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(stocksm)</a>
<a class="sourceLine" id="cb17-43" data-line-number="43">  stock      price</a>
<a class="sourceLine" id="cb17-44" data-line-number="44"><span class="dv">1</span>     X  <span class="fl">1.1563222</span></a>
<a class="sourceLine" id="cb17-45" data-line-number="45"><span class="dv">2</span>     X <span class="fl">-0.9381941</span></a>
<a class="sourceLine" id="cb17-46" data-line-number="46"><span class="dv">3</span>     X  <span class="fl">0.5240523</span></a>
<a class="sourceLine" id="cb17-47" data-line-number="47"><span class="dv">4</span>     X <span class="fl">-0.1280867</span></a>
<a class="sourceLine" id="cb17-48" data-line-number="48"><span class="dv">5</span>     X <span class="fl">-1.8263122</span></a>
<a class="sourceLine" id="cb17-49" data-line-number="49"><span class="dv">6</span>     X  <span class="fl">0.5326658</span></a>
<a class="sourceLine" id="cb17-50" data-line-number="50"></a>
<a class="sourceLine" id="cb17-51" data-line-number="51">stocksm <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-52" data-line-number="52"><span class="st">  </span><span class="kw">spread</span>(stock, price)         <span class="co"># annoying</span></a>
<a class="sourceLine" id="cb17-53" data-line-number="53">Each row of output must be identified by a unique combination of keys.</a>
<a class="sourceLine" id="cb17-54" data-line-number="54">Keys are shared <span class="cf">for</span> <span class="dv">30</span> rows<span class="op">:</span></a>
<a class="sourceLine" id="cb17-55" data-line-number="55"><span class="er">*</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span></a>
<a class="sourceLine" id="cb17-56" data-line-number="56"><span class="op">*</span><span class="st"> </span><span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>, <span class="dv">20</span></a>
<a class="sourceLine" id="cb17-57" data-line-number="57"><span class="op">*</span><span class="st"> </span><span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">24</span>, <span class="dv">25</span>, <span class="dv">26</span>, <span class="dv">27</span>, <span class="dv">28</span>, <span class="dv">29</span>, <span class="dv">30</span></a>
<a class="sourceLine" id="cb17-58" data-line-number="58">Do you need to create unique ID with tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/rownames.html">rowid_to_column</a></span>()?</a>
<a class="sourceLine" id="cb17-59" data-line-number="59"></a>
<a class="sourceLine" id="cb17-60" data-line-number="60">stocksm <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-61" data-line-number="61"><span class="st">  </span><span class="kw"><a href="../reference/spread2.html">spread2</a></span>(stock, price)        <span class="co"># works fine</span></a>
<a class="sourceLine" id="cb17-62" data-line-number="62">             X           Y          Z</a>
<a class="sourceLine" id="cb17-63" data-line-number="63"><span class="dv">1</span>   <span class="fl">1.15632219</span>  <span class="fl">3.20580570</span>  <span class="fl">3.4522024</span></a>
<a class="sourceLine" id="cb17-64" data-line-number="64"><span class="dv">2</span>  <span class="fl">-0.93819413</span> <span class="fl">-0.05906042</span> <span class="fl">-3.9751471</span></a>
<a class="sourceLine" id="cb17-65" data-line-number="65"><span class="dv">3</span>   <span class="fl">0.52405233</span> <span class="fl">-0.79476986</span> <span class="fl">-1.9407887</span></a>
<a class="sourceLine" id="cb17-66" data-line-number="66"><span class="dv">4</span>  <span class="fl">-0.12808670</span> <span class="fl">-0.19162662</span>  <span class="fl">2.0707290</span></a>
<a class="sourceLine" id="cb17-67" data-line-number="67"><span class="dv">5</span>  <span class="fl">-1.82631218</span> <span class="fl">-1.66025840</span> <span class="fl">-1.4190455</span></a>
<a class="sourceLine" id="cb17-68" data-line-number="68"><span class="dv">6</span>   <span class="fl">0.53266578</span>  <span class="fl">1.22780477</span> <span class="fl">-0.7697497</span></a>
<a class="sourceLine" id="cb17-69" data-line-number="69"><span class="dv">7</span>   <span class="fl">0.04044005</span>  <span class="fl">0.11893358</span>  <span class="fl">7.6421795</span></a>
<a class="sourceLine" id="cb17-70" data-line-number="70"><span class="dv">8</span>   <span class="fl">1.01614077</span> <span class="fl">-3.35639245</span>  <span class="fl">7.2477876</span></a>
<a class="sourceLine" id="cb17-71" data-line-number="71"><span class="dv">9</span>   <span class="fl">0.27227199</span>  <span class="fl">0.93510359</span>  <span class="fl">1.3064328</span></a>
<a class="sourceLine" id="cb17-72" data-line-number="72"><span class="dv">10</span>  <span class="fl">0.99972077</span> <span class="fl">-3.72109524</span> <span class="fl">-0.1234475</span></a></code></pre></div>
<p>However, with unbalanced data the result can be interpreted in different ways, so you’ll have a choice to make.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">stocksm<span class="op">$</span>price[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample</a></span>(<span class="dv">1</span><span class="op">:</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(stocksm), <span class="dv">5</span>)] =<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2">stocksm <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/spread2.html">spread2</a></span>(stock, price)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">             X           Y          Z</a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="dv">1</span>   <span class="fl">1.15632219</span>  <span class="fl">3.20580570</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="dv">2</span>  <span class="fl">-0.93819413</span> <span class="fl">-0.05906042</span> <span class="fl">-3.9751471</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="dv">3</span>   <span class="fl">0.52405233</span> <span class="fl">-0.79476986</span> <span class="fl">-1.9407887</span></a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="dv">4</span>           <span class="ot">NA</span> <span class="fl">-0.19162662</span>  <span class="fl">2.0707290</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="dv">5</span>           <span class="ot">NA</span> <span class="fl">-1.66025840</span> <span class="fl">-1.4190455</span></a>
<a class="sourceLine" id="cb18-10" data-line-number="10"><span class="dv">6</span>   <span class="fl">0.53266578</span>  <span class="fl">1.22780477</span> <span class="fl">-0.7697497</span></a>
<a class="sourceLine" id="cb18-11" data-line-number="11"><span class="dv">7</span>   <span class="fl">0.04044005</span>  <span class="fl">0.11893358</span>  <span class="fl">7.6421795</span></a>
<a class="sourceLine" id="cb18-12" data-line-number="12"><span class="dv">8</span>           <span class="ot">NA</span> <span class="fl">-3.35639245</span>  <span class="fl">7.2477876</span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13"><span class="dv">9</span>   <span class="fl">0.27227199</span>  <span class="fl">0.93510359</span>  <span class="fl">1.3064328</span></a>
<a class="sourceLine" id="cb18-14" data-line-number="14"><span class="dv">10</span>          <span class="ot">NA</span> <span class="fl">-3.72109524</span> <span class="fl">-0.1234475</span></a>
<a class="sourceLine" id="cb18-15" data-line-number="15"></a>
<a class="sourceLine" id="cb18-16" data-line-number="16">stocksm <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-17" data-line-number="17"><span class="st">  </span><span class="kw"><a href="../reference/spread2.html">spread2</a></span>(stock, price, <span class="dt">compact =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb18-18" data-line-number="18">             X           Y          Z</a>
<a class="sourceLine" id="cb18-19" data-line-number="19"><span class="dv">1</span>   <span class="fl">1.15632219</span>          <span class="ot">NA</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-20" data-line-number="20"><span class="dv">2</span>  <span class="fl">-0.93819413</span>          <span class="ot">NA</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-21" data-line-number="21"><span class="dv">3</span>   <span class="fl">0.52405233</span>          <span class="ot">NA</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-22" data-line-number="22"><span class="dv">4</span>           <span class="ot">NA</span>          <span class="ot">NA</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-23" data-line-number="23"><span class="dv">5</span>           <span class="ot">NA</span>          <span class="ot">NA</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-24" data-line-number="24"><span class="dv">6</span>   <span class="fl">0.53266578</span>          <span class="ot">NA</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-25" data-line-number="25"><span class="dv">7</span>   <span class="fl">0.04044005</span>          <span class="ot">NA</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-26" data-line-number="26"><span class="dv">8</span>           <span class="ot">NA</span>          <span class="ot">NA</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-27" data-line-number="27"><span class="dv">9</span>   <span class="fl">0.27227199</span>          <span class="ot">NA</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-28" data-line-number="28"><span class="dv">10</span>          <span class="ot">NA</span>          <span class="ot">NA</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-29" data-line-number="29"><span class="dv">11</span>          <span class="ot">NA</span>  <span class="fl">3.20580570</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-30" data-line-number="30"><span class="dv">12</span>          <span class="ot">NA</span> <span class="fl">-0.05906042</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-31" data-line-number="31"><span class="dv">13</span>          <span class="ot">NA</span> <span class="fl">-0.79476986</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-32" data-line-number="32"><span class="dv">14</span>          <span class="ot">NA</span> <span class="fl">-0.19162662</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-33" data-line-number="33"><span class="dv">15</span>          <span class="ot">NA</span> <span class="fl">-1.66025840</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-34" data-line-number="34"><span class="dv">16</span>          <span class="ot">NA</span>  <span class="fl">1.22780477</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-35" data-line-number="35"><span class="dv">17</span>          <span class="ot">NA</span>  <span class="fl">0.11893358</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-36" data-line-number="36"><span class="dv">18</span>          <span class="ot">NA</span> <span class="fl">-3.35639245</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-37" data-line-number="37"><span class="dv">19</span>          <span class="ot">NA</span>  <span class="fl">0.93510359</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-38" data-line-number="38"><span class="dv">20</span>          <span class="ot">NA</span> <span class="fl">-3.72109524</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-39" data-line-number="39"><span class="dv">21</span>          <span class="ot">NA</span>          <span class="ot">NA</span>         <span class="ot">NA</span></a>
<a class="sourceLine" id="cb18-40" data-line-number="40"><span class="dv">22</span>          <span class="ot">NA</span>          <span class="ot">NA</span> <span class="fl">-3.9751471</span></a>
<a class="sourceLine" id="cb18-41" data-line-number="41"><span class="dv">23</span>          <span class="ot">NA</span>          <span class="ot">NA</span> <span class="fl">-1.9407887</span></a>
<a class="sourceLine" id="cb18-42" data-line-number="42"><span class="dv">24</span>          <span class="ot">NA</span>          <span class="ot">NA</span>  <span class="fl">2.0707290</span></a>
<a class="sourceLine" id="cb18-43" data-line-number="43"><span class="dv">25</span>          <span class="ot">NA</span>          <span class="ot">NA</span> <span class="fl">-1.4190455</span></a>
<a class="sourceLine" id="cb18-44" data-line-number="44"><span class="dv">26</span>          <span class="ot">NA</span>          <span class="ot">NA</span> <span class="fl">-0.7697497</span></a>
<a class="sourceLine" id="cb18-45" data-line-number="45"><span class="dv">27</span>          <span class="ot">NA</span>          <span class="ot">NA</span>  <span class="fl">7.6421795</span></a>
<a class="sourceLine" id="cb18-46" data-line-number="46"><span class="dv">28</span>          <span class="ot">NA</span>          <span class="ot">NA</span>  <span class="fl">7.2477876</span></a>
<a class="sourceLine" id="cb18-47" data-line-number="47"><span class="dv">29</span>          <span class="ot">NA</span>          <span class="ot">NA</span>  <span class="fl">1.3064328</span></a>
<a class="sourceLine" id="cb18-48" data-line-number="48"><span class="dv">30</span>          <span class="ot">NA</span>          <span class="ot">NA</span> <span class="fl">-0.1234475</span></a></code></pre></div>
<p>I can speak from experience that having longitudinal data in the <code>compact = FALSE</code> format is about the worst way you could keep such data.</p>
<p>Use <span class="func">gather_multi</span> to extend <code><a href="https://tidyr.tidyverse.org/reference/gather.html">tidyr::gather</a></code> to deal with multiple sets of variables.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">demo_data_wide =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">id =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">                            <span class="dt">X =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">40</span>), <span class="dt">ncol =</span> <span class="dv">4</span>),</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">                            <span class="dt">Y =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/sample">sample</a></span>(<span class="dv">0</span><span class="op">:</span><span class="dv">1</span>, <span class="dv">40</span>, <span class="dt">replace =</span> T), <span class="dt">ncol =</span> <span class="dv">4</span>),</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">                            <span class="dt">Z =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">matrix</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Poisson">rpois</a></span>(<span class="dv">40</span>, <span class="dv">5</span>), <span class="dt">ncol =</span> <span class="dv">4</span>))</a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(demo_data_wide)</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">  id         X<span class="fl">.1</span>        X<span class="fl">.2</span>        X<span class="fl">.3</span>        X<span class="fl">.4</span> Y<span class="fl">.1</span> Y<span class="fl">.2</span> Y<span class="fl">.3</span> Y<span class="fl">.4</span> Z<span class="fl">.1</span> Z<span class="fl">.2</span> Z<span class="fl">.3</span> Z<span class="fl">.4</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="dv">1</span>  <span class="dv">1</span> <span class="fl">-0.53445423</span>  <span class="fl">0.5065096</span> <span class="fl">-1.3589762</span>  <span class="fl">0.7598957</span>   <span class="dv">0</span>   <span class="dv">1</span>   <span class="dv">1</span>   <span class="dv">0</span>   <span class="dv">2</span>   <span class="dv">7</span>   <span class="dv">6</span>  <span class="dv">11</span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="dv">2</span>  <span class="dv">2</span> <span class="fl">-0.09368249</span> <span class="fl">-1.2568838</span>  <span class="fl">0.5249439</span>  <span class="fl">0.6650419</span>   <span class="dv">0</span>   <span class="dv">1</span>   <span class="dv">0</span>   <span class="dv">1</span>   <span class="dv">4</span>   <span class="dv">4</span>   <span class="dv">6</span>   <span class="dv">2</span></a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="dv">3</span>  <span class="dv">3</span> <span class="fl">-0.33135633</span> <span class="fl">-1.0589727</span>  <span class="fl">2.5174225</span>  <span class="fl">0.9208250</span>   <span class="dv">1</span>   <span class="dv">0</span>   <span class="dv">1</span>   <span class="dv">1</span>   <span class="dv">2</span>   <span class="dv">3</span>   <span class="dv">9</span>   <span class="dv">6</span></a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="dv">4</span>  <span class="dv">4</span> <span class="fl">-1.05702864</span>  <span class="fl">0.6320716</span>  <span class="fl">0.8481803</span> <span class="fl">-0.3679236</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">1</span>   <span class="dv">0</span>   <span class="dv">4</span>   <span class="dv">8</span>   <span class="dv">6</span>   <span class="dv">0</span></a>
<a class="sourceLine" id="cb19-11" data-line-number="11"><span class="dv">5</span>  <span class="dv">5</span>  <span class="fl">0.18527863</span> <span class="fl">-0.7138931</span> <span class="fl">-2.1592811</span>  <span class="fl">0.1919997</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">0</span>   <span class="dv">1</span>   <span class="dv">3</span>   <span class="dv">7</span>   <span class="dv">4</span>   <span class="dv">6</span></a>
<a class="sourceLine" id="cb19-12" data-line-number="12"><span class="dv">6</span>  <span class="dv">6</span>  <span class="fl">0.32825631</span>  <span class="fl">0.8307916</span> <span class="fl">-0.4392953</span> <span class="fl">-1.2894000</span>   <span class="dv">1</span>   <span class="dv">1</span>   <span class="dv">0</span>   <span class="dv">1</span>   <span class="dv">5</span>   <span class="dv">6</span>   <span class="dv">2</span>  <span class="dv">10</span></a>
<a class="sourceLine" id="cb19-13" data-line-number="13"></a>
<a class="sourceLine" id="cb19-14" data-line-number="14"><span class="kw"><a href="../reference/gather_multi.html">gather_multi</a></span>(demo_data_wide,</a>
<a class="sourceLine" id="cb19-15" data-line-number="15">             <span class="dt">key =</span> wave,</a>
<a class="sourceLine" id="cb19-16" data-line-number="16">             <span class="dt">values  =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span>(X, Y, Z),</a>
<a class="sourceLine" id="cb19-17" data-line-number="17">             <span class="dt">varlist =</span> <span class="kw"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span>(<span class="kw">starts_with</span>(<span class="st">'X'</span>),</a>
<a class="sourceLine" id="cb19-18" data-line-number="18">                            <span class="kw">starts_with</span>(<span class="st">'Y'</span>),</a>
<a class="sourceLine" id="cb19-19" data-line-number="19">                            <span class="kw">starts_with</span>(<span class="st">'Z'</span>)),</a>
<a class="sourceLine" id="cb19-20" data-line-number="20">             <span class="op">-</span>id)</a>
<a class="sourceLine" id="cb19-21" data-line-number="21">   id wave           X Y  Z</a>
<a class="sourceLine" id="cb19-22" data-line-number="22"><span class="dv">1</span>   <span class="dv">1</span>  X<span class="fl">.1</span> <span class="fl">-0.53445423</span> <span class="dv">0</span>  <span class="dv">2</span></a>
<a class="sourceLine" id="cb19-23" data-line-number="23"><span class="dv">2</span>   <span class="dv">2</span>  X<span class="fl">.1</span> <span class="fl">-0.09368249</span> <span class="dv">0</span>  <span class="dv">4</span></a>
<a class="sourceLine" id="cb19-24" data-line-number="24"><span class="dv">3</span>   <span class="dv">3</span>  X<span class="fl">.1</span> <span class="fl">-0.33135633</span> <span class="dv">1</span>  <span class="dv">2</span></a>
<a class="sourceLine" id="cb19-25" data-line-number="25"><span class="dv">4</span>   <span class="dv">4</span>  X<span class="fl">.1</span> <span class="fl">-1.05702864</span> <span class="dv">0</span>  <span class="dv">4</span></a>
<a class="sourceLine" id="cb19-26" data-line-number="26"><span class="dv">5</span>   <span class="dv">5</span>  X<span class="fl">.1</span>  <span class="fl">0.18527863</span> <span class="dv">0</span>  <span class="dv">3</span></a>
<a class="sourceLine" id="cb19-27" data-line-number="27"><span class="dv">6</span>   <span class="dv">6</span>  X<span class="fl">.1</span>  <span class="fl">0.32825631</span> <span class="dv">1</span>  <span class="dv">5</span></a>
<a class="sourceLine" id="cb19-28" data-line-number="28"><span class="dv">7</span>   <span class="dv">7</span>  X<span class="fl">.1</span>  <span class="fl">1.55306164</span> <span class="dv">1</span>  <span class="dv">4</span></a>
<a class="sourceLine" id="cb19-29" data-line-number="29"><span class="dv">8</span>   <span class="dv">8</span>  X<span class="fl">.1</span>  <span class="fl">1.18040282</span> <span class="dv">0</span>  <span class="dv">5</span></a>
<a class="sourceLine" id="cb19-30" data-line-number="30"><span class="dv">9</span>   <span class="dv">9</span>  X<span class="fl">.1</span> <span class="fl">-1.17539903</span> <span class="dv">0</span>  <span class="dv">6</span></a>
<a class="sourceLine" id="cb19-31" data-line-number="31"><span class="dv">10</span> <span class="dv">10</span>  X<span class="fl">.1</span> <span class="fl">-0.42584154</span> <span class="dv">1</span>  <span class="dv">7</span></a>
<a class="sourceLine" id="cb19-32" data-line-number="32"><span class="dv">11</span>  <span class="dv">1</span>  X<span class="fl">.2</span>  <span class="fl">0.50650964</span> <span class="dv">1</span>  <span class="dv">7</span></a>
<a class="sourceLine" id="cb19-33" data-line-number="33"><span class="dv">12</span>  <span class="dv">2</span>  X<span class="fl">.2</span> <span class="fl">-1.25688378</span> <span class="dv">1</span>  <span class="dv">4</span></a>
<a class="sourceLine" id="cb19-34" data-line-number="34"><span class="dv">13</span>  <span class="dv">3</span>  X<span class="fl">.2</span> <span class="fl">-1.05897267</span> <span class="dv">0</span>  <span class="dv">3</span></a>
<a class="sourceLine" id="cb19-35" data-line-number="35"><span class="dv">14</span>  <span class="dv">4</span>  X<span class="fl">.2</span>  <span class="fl">0.63207158</span> <span class="dv">0</span>  <span class="dv">8</span></a>
<a class="sourceLine" id="cb19-36" data-line-number="36"><span class="dv">15</span>  <span class="dv">5</span>  X<span class="fl">.2</span> <span class="fl">-0.71389314</span> <span class="dv">0</span>  <span class="dv">7</span></a>
<a class="sourceLine" id="cb19-37" data-line-number="37"><span class="dv">16</span>  <span class="dv">6</span>  X<span class="fl">.2</span>  <span class="fl">0.83079161</span> <span class="dv">1</span>  <span class="dv">6</span></a>
<a class="sourceLine" id="cb19-38" data-line-number="38"><span class="dv">17</span>  <span class="dv">7</span>  X<span class="fl">.2</span> <span class="fl">-0.14366319</span> <span class="dv">0</span>  <span class="dv">4</span></a>
<a class="sourceLine" id="cb19-39" data-line-number="39"><span class="dv">18</span>  <span class="dv">8</span>  X<span class="fl">.2</span>  <span class="fl">0.48591854</span> <span class="dv">0</span>  <span class="dv">6</span></a>
<a class="sourceLine" id="cb19-40" data-line-number="40"><span class="dv">19</span>  <span class="dv">9</span>  X<span class="fl">.2</span>  <span class="fl">0.66086652</span> <span class="dv">1</span>  <span class="dv">5</span></a>
<a class="sourceLine" id="cb19-41" data-line-number="41"><span class="dv">20</span> <span class="dv">10</span>  X<span class="fl">.2</span>  <span class="fl">2.86171590</span> <span class="dv">1</span>  <span class="dv">4</span></a>
<a class="sourceLine" id="cb19-42" data-line-number="42"><span class="dv">21</span>  <span class="dv">1</span>  X<span class="fl">.3</span> <span class="fl">-1.35897615</span> <span class="dv">1</span>  <span class="dv">6</span></a>
<a class="sourceLine" id="cb19-43" data-line-number="43"><span class="dv">22</span>  <span class="dv">2</span>  X<span class="fl">.3</span>  <span class="fl">0.52494388</span> <span class="dv">0</span>  <span class="dv">6</span></a>
<a class="sourceLine" id="cb19-44" data-line-number="44"><span class="dv">23</span>  <span class="dv">3</span>  X<span class="fl">.3</span>  <span class="fl">2.51742254</span> <span class="dv">1</span>  <span class="dv">9</span></a>
<a class="sourceLine" id="cb19-45" data-line-number="45"><span class="dv">24</span>  <span class="dv">4</span>  X<span class="fl">.3</span>  <span class="fl">0.84818031</span> <span class="dv">1</span>  <span class="dv">6</span></a>
<a class="sourceLine" id="cb19-46" data-line-number="46"><span class="dv">25</span>  <span class="dv">5</span>  X<span class="fl">.3</span> <span class="fl">-2.15928107</span> <span class="dv">0</span>  <span class="dv">4</span></a>
<a class="sourceLine" id="cb19-47" data-line-number="47"><span class="dv">26</span>  <span class="dv">6</span>  X<span class="fl">.3</span> <span class="fl">-0.43929526</span> <span class="dv">0</span>  <span class="dv">2</span></a>
<a class="sourceLine" id="cb19-48" data-line-number="48"><span class="dv">27</span>  <span class="dv">7</span>  X<span class="fl">.3</span>  <span class="fl">0.65278320</span> <span class="dv">1</span>  <span class="dv">8</span></a>
<a class="sourceLine" id="cb19-49" data-line-number="49"><span class="dv">28</span>  <span class="dv">8</span>  X<span class="fl">.3</span>  <span class="fl">0.07591408</span> <span class="dv">1</span>  <span class="dv">2</span></a>
<a class="sourceLine" id="cb19-50" data-line-number="50"><span class="dv">29</span>  <span class="dv">9</span>  X<span class="fl">.3</span> <span class="fl">-0.55796017</span> <span class="dv">1</span>  <span class="dv">8</span></a>
<a class="sourceLine" id="cb19-51" data-line-number="51"><span class="dv">30</span> <span class="dv">10</span>  X<span class="fl">.3</span> <span class="fl">-0.25082981</span> <span class="dv">0</span>  <span class="dv">6</span></a>
<a class="sourceLine" id="cb19-52" data-line-number="52"><span class="dv">31</span>  <span class="dv">1</span>  X<span class="fl">.4</span>  <span class="fl">0.75989565</span> <span class="dv">0</span> <span class="dv">11</span></a>
<a class="sourceLine" id="cb19-53" data-line-number="53"><span class="dv">32</span>  <span class="dv">2</span>  X<span class="fl">.4</span>  <span class="fl">0.66504187</span> <span class="dv">1</span>  <span class="dv">2</span></a>
<a class="sourceLine" id="cb19-54" data-line-number="54"><span class="dv">33</span>  <span class="dv">3</span>  X<span class="fl">.4</span>  <span class="fl">0.92082505</span> <span class="dv">1</span>  <span class="dv">6</span></a>
<a class="sourceLine" id="cb19-55" data-line-number="55"><span class="dv">34</span>  <span class="dv">4</span>  X<span class="fl">.4</span> <span class="fl">-0.36792358</span> <span class="dv">0</span>  <span class="dv">0</span></a>
<a class="sourceLine" id="cb19-56" data-line-number="56"><span class="dv">35</span>  <span class="dv">5</span>  X<span class="fl">.4</span>  <span class="fl">0.19199969</span> <span class="dv">1</span>  <span class="dv">6</span></a>
<a class="sourceLine" id="cb19-57" data-line-number="57"><span class="dv">36</span>  <span class="dv">6</span>  X<span class="fl">.4</span> <span class="fl">-1.28940004</span> <span class="dv">1</span> <span class="dv">10</span></a>
<a class="sourceLine" id="cb19-58" data-line-number="58"><span class="dv">37</span>  <span class="dv">7</span>  X<span class="fl">.4</span> <span class="fl">-1.69247051</span> <span class="dv">1</span>  <span class="dv">7</span></a>
<a class="sourceLine" id="cb19-59" data-line-number="59"><span class="dv">38</span>  <span class="dv">8</span>  X<span class="fl">.4</span>  <span class="fl">0.35244834</span> <span class="dv">1</span>  <span class="dv">5</span></a>
<a class="sourceLine" id="cb19-60" data-line-number="60"><span class="dv">39</span>  <span class="dv">9</span>  X<span class="fl">.4</span>  <span class="fl">0.54339917</span> <span class="dv">1</span>  <span class="dv">3</span></a>
<a class="sourceLine" id="cb19-61" data-line-number="61"><span class="dv">40</span> <span class="dv">10</span>  X<span class="fl">.4</span>  <span class="fl">0.83661156</span> <span class="dv">1</span>  <span class="dv">4</span></a></code></pre></div>
<p>Note that this only makes sense with balanced data, though it will work if NAs are present. Also, you may want to change the key in some fashion.</p>
<p>Oftentimes I need to create a column that represents the total scores or means of just a few columns. This is a slight annoyance in the tidyverse, and there isn’t much support behind the <span class="pack" style="">dplyr</span>:<span class="func" style="">rowwise</span> function. As such, tidyext has a couple simple wrappers for row_sums, row_means, and row_apply.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">d =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>,</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">               <span class="dt">y =</span> <span class="dv">4</span><span class="op">:</span><span class="dv">6</span>,</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">               <span class="dt">z =</span> <span class="dv">7</span><span class="op">:</span><span class="dv">9</span>,</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">               <span class="dt">q =</span> <span class="ot">NA</span>)</a>
<a class="sourceLine" id="cb20-5" data-line-number="5"></a>
<a class="sourceLine" id="cb20-6" data-line-number="6">d  <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="st"> </span><span class="kw"><a href="../reference/row_sums.html">row_sums</a></span>(x<span class="op">:</span>y)</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">  x y z  q sum</a>
<a class="sourceLine" id="cb20-9" data-line-number="9"><span class="dv">1</span> <span class="dv">1</span> <span class="dv">4</span> <span class="dv">7</span> <span class="ot">NA</span>   <span class="dv">5</span></a>
<a class="sourceLine" id="cb20-10" data-line-number="10"><span class="dv">2</span> <span class="dv">2</span> <span class="dv">5</span> <span class="dv">8</span> <span class="ot">NA</span>   <span class="dv">7</span></a>
<a class="sourceLine" id="cb20-11" data-line-number="11"><span class="dv">3</span> <span class="dv">3</span> <span class="dv">6</span> <span class="dv">9</span> <span class="ot">NA</span>   <span class="dv">9</span></a>
<a class="sourceLine" id="cb20-12" data-line-number="12"></a>
<a class="sourceLine" id="cb20-13" data-line-number="13">d  <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-14" data-line-number="14"><span class="st"> </span><span class="kw"><a href="../reference/row_sums.html">row_means</a></span>(<span class="kw">matches</span>(<span class="st">'x|z'</span>))</a>
<a class="sourceLine" id="cb20-15" data-line-number="15">  x y z  q mean</a>
<a class="sourceLine" id="cb20-16" data-line-number="16"><span class="dv">1</span> <span class="dv">1</span> <span class="dv">4</span> <span class="dv">7</span> <span class="ot">NA</span>    <span class="dv">4</span></a>
<a class="sourceLine" id="cb20-17" data-line-number="17"><span class="dv">2</span> <span class="dv">2</span> <span class="dv">5</span> <span class="dv">8</span> <span class="ot">NA</span>    <span class="dv">5</span></a>
<a class="sourceLine" id="cb20-18" data-line-number="18"><span class="dv">3</span> <span class="dv">3</span> <span class="dv">6</span> <span class="dv">9</span> <span class="ot">NA</span>    <span class="dv">6</span></a>
<a class="sourceLine" id="cb20-19" data-line-number="19"></a>
<a class="sourceLine" id="cb20-20" data-line-number="20"><span class="kw"><a href="../reference/row_sums.html">row_apply</a></span>(</a>
<a class="sourceLine" id="cb20-21" data-line-number="21"> d ,</a>
<a class="sourceLine" id="cb20-22" data-line-number="22"> x<span class="op">:</span>z,</a>
<a class="sourceLine" id="cb20-23" data-line-number="23"> <span class="dt">.fun =</span> <span class="cf">function</span>(x)</a>
<a class="sourceLine" id="cb20-24" data-line-number="24">   <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/apply">apply</a></span>(x, <span class="dv">1</span>, paste, <span class="dt">collapse =</span> <span class="st">''</span>)</a>
<a class="sourceLine" id="cb20-25" data-line-number="25">)</a>
<a class="sourceLine" id="cb20-26" data-line-number="26">  x y z  q var</a>
<a class="sourceLine" id="cb20-27" data-line-number="27"><span class="dv">1</span> <span class="dv">1</span> <span class="dv">4</span> <span class="dv">7</span> <span class="ot">NA</span> <span class="dv">147</span></a>
<a class="sourceLine" id="cb20-28" data-line-number="28"><span class="dv">2</span> <span class="dv">2</span> <span class="dv">5</span> <span class="dv">8</span> <span class="ot">NA</span> <span class="dv">258</span></a>
<a class="sourceLine" id="cb20-29" data-line-number="29"><span class="dv">3</span> <span class="dv">3</span> <span class="dv">6</span> <span class="dv">9</span> <span class="ot">NA</span> <span class="dv">369</span></a></code></pre></div>
<p><br><br><br><br><br><br></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#getting-started-with-tidyext">Getting started with tidyext</a><ul class="nav nav-pills nav-stacked">
<li><a href="#data-summaries">Data Summaries</a></li>
      <li><a href="#data-processing">Data Processing</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://m-clark.github.io">Michael Clark <img src="man/figures/lh_hex.png" height="24"></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
