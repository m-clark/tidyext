<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Spread without frustration — spread2 • tidyext!</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Spread without frustration — spread2" />
<meta property="og:description" content="Spread without frustration" />
<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidyext!</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/introduction.html">Introduction to tidyext</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/m-clark">
    <span class="fa fa-github-alt"></span>
     
  </a>
</li>
<li>
  <a href="https://m-clark.github.io">
    <span class="fa fa-empire"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Spread without frustration</h1>
    <small class="dont-index">Source: <a href='https://github.com/m-clark/tidyext/blob/master/R/spread2.R'><code>R/spread2.R</code></a></small>
    <div class="hidden name"><code>spread2.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Spread without frustration</p>
    </div>

    <pre class="usage"><span class='fu'>spread2</span>(
  <span class='no'>data</span>,
  <span class='no'>key</span>,
  <span class='no'>value</span>,
  <span class='kw'>compact</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>fill</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>convert</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>drop</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>sep</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>See <code><a href='https://tidyr.tidyverse.org/reference/spread.html'>spread</a></code>.</p></td>
    </tr>
    <tr>
      <th>key</th>
      <td><p>See <code><a href='https://tidyr.tidyverse.org/reference/spread.html'>spread</a></code>.</p></td>
    </tr>
    <tr>
      <th>value</th>
      <td><p>See <code><a href='https://tidyr.tidyverse.org/reference/spread.html'>spread</a></code>.</p></td>
    </tr>
    <tr>
      <th>compact</th>
      <td><p>When you don't have a unique identifier there is more than one
way the output could be produced. Actually two. One is rather messy but may
in fact be what is desired. The other is more 'compact'. See the examples.</p></td>
    </tr>
    <tr>
      <th>fill</th>
      <td><p>See <code><a href='https://tidyr.tidyverse.org/reference/spread.html'>spread</a></code>.</p></td>
    </tr>
    <tr>
      <th>convert</th>
      <td><p>See <code><a href='https://tidyr.tidyverse.org/reference/spread.html'>spread</a></code>.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>See <code><a href='https://tidyr.tidyverse.org/reference/spread.html'>spread</a></code>.</p></td>
    </tr>
    <tr>
      <th>sep</th>
      <td><p>See <code><a href='https://tidyr.tidyverse.org/reference/spread.html'>spread</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame with 'wide' format.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Anyone that uses spread more than once has likely come across the
  duplicate identifiers problem.  This function works just like select (it's
  mostly just a wrapper) except that it works when you don't have unique
  identifiers, which is actually quite often.  The only additional
  functionality regards the <code>compact</code> argument. See the examples for
  what this means.</p>
<p>For more, see
  <a href='https://stackoverflow.com/questions/45898614/how-to-spread-columns-with-duplicate-identifiers?rq=1'>StackOverflow</a>
   for example, or the numerous repeated issue brought up at the
  <a href='https://github.com/tidyverse/tidyr/issues'>tidyr GitHub issues
  page</a>. Search for 'spread duplicate' for all, not just open issues (direct link couldn't be handled
  by R documentation).</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='https://tidyr.tidyverse.org/reference/spread.html'>spread</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>tidyext</span>); <span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>tidyr</span>)

<span class='co'># initial example from spread</span>
<span class='no'>stocks_init</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(
<span class='kw'>time</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span>(<span class='st'>'2009-01-01'</span>) + <span class='fl'>0</span>:<span class='fl'>9</span>,
<span class='kw'>X</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>1</span>),
<span class='kw'>Y</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>2</span>),
<span class='kw'>Z</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>4</span>)
)

<span class='co'># a very common situation</span>
<span class='no'>stocks</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(
  <span class='kw'>X</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>1</span>),
  <span class='kw'>Y</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>2</span>),
  <span class='kw'>Z</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span>(<span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>4</span>)
)


<span class='no'>stocksm_init</span> <span class='kw'>&lt;-</span> <span class='no'>stocks_init</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='https://tidyr.tidyverse.org/reference/gather.html'>gather</a></span>(<span class='no'>stock</span>, <span class='no'>price</span>, -<span class='no'>time</span>)
<span class='no'>stocksm_init</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='https://tidyr.tidyverse.org/reference/spread.html'>spread</a></span>(<span class='no'>stock</span>, <span class='no'>price</span>)    <span class='co'># works fine</span></div><div class='output co'>#&gt;          time          X          Y          Z
#&gt; 1  2009-01-01  1.2240818 -2.1356474  1.7058569
#&gt; 2  2009-01-02  0.3598138 -0.4359498 -1.1802859
#&gt; 3  2009-01-03  0.4007715 -2.0520089  3.5805026
#&gt; 4  2009-01-04  0.1106827 -1.4577825  3.5125340
#&gt; 5  2009-01-05 -0.5558411 -1.2500785  3.2863243
#&gt; 6  2009-01-06  1.7869131 -3.3733866  2.7545610
#&gt; 7  2009-01-07  0.4978505  1.6755741  2.2156706
#&gt; 8  2009-01-08 -1.9666172  0.3067462 -0.2476468
#&gt; 9  2009-01-09  0.7013559 -2.2762739 -1.2238507
#&gt; 10 2009-01-10 -0.4727914  2.5076298 -1.5218840</div><div class='input'><span class='no'>stocksm</span> <span class='kw'>&lt;-</span> <span class='no'>stocks</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='https://tidyr.tidyverse.org/reference/gather.html'>gather</a></span>(<span class='no'>stock</span>, <span class='no'>price</span>)
<span class='co'># stocksm %&gt;% spread(stock, price)       # annoying</span>
<span class='no'>stocksm</span> <span class='kw'>%&gt;%</span> <span class='fu'>spread2</span>(<span class='no'>stock</span>, <span class='no'>price</span>)        <span class='co'># works fine</span></div><div class='output co'>#&gt;              X           Y          Z
#&gt; 1  -0.69470698  0.50663703  1.5185579
#&gt; 2  -0.20791728 -0.05709351 -2.0092938
#&gt; 3  -1.26539635 -0.08574091 -1.3328295
#&gt; 4   2.16895597  2.73720457 -4.0743015
#&gt; 5   1.20796200 -0.45154197 -4.2871649
#&gt; 6  -1.12310858  3.03294121  1.2141146
#&gt; 7  -0.40288484 -3.09750561  1.7928391
#&gt; 8  -0.46665535  1.16922750  0.2120169
#&gt; 9   0.77996512  0.24770849  3.6890699
#&gt; 10 -0.08336907  0.43188314  8.2003387</div><div class='input'><span class='no'>stocksm</span> <span class='kw'>%&gt;%</span> <span class='fu'>spread2</span>(<span class='no'>stock</span>, <span class='no'>price</span>, <span class='kw'>compact</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt;              X           Y          Z
#&gt; 1  -0.69470698          NA         NA
#&gt; 2  -0.20791728          NA         NA
#&gt; 3  -1.26539635          NA         NA
#&gt; 4   2.16895597          NA         NA
#&gt; 5   1.20796200          NA         NA
#&gt; 6  -1.12310858          NA         NA
#&gt; 7  -0.40288484          NA         NA
#&gt; 8  -0.46665535          NA         NA
#&gt; 9   0.77996512          NA         NA
#&gt; 10 -0.08336907          NA         NA
#&gt; 11          NA  0.50663703         NA
#&gt; 12          NA -0.05709351         NA
#&gt; 13          NA -0.08574091         NA
#&gt; 14          NA  2.73720457         NA
#&gt; 15          NA -0.45154197         NA
#&gt; 16          NA  3.03294121         NA
#&gt; 17          NA -3.09750561         NA
#&gt; 18          NA  1.16922750         NA
#&gt; 19          NA  0.24770849         NA
#&gt; 20          NA  0.43188314         NA
#&gt; 21          NA          NA  1.5185579
#&gt; 22          NA          NA -2.0092938
#&gt; 23          NA          NA -1.3328295
#&gt; 24          NA          NA -4.0743015
#&gt; 25          NA          NA -4.2871649
#&gt; 26          NA          NA  1.2141146
#&gt; 27          NA          NA  1.7928391
#&gt; 28          NA          NA  0.2120169
#&gt; 29          NA          NA  3.6890699
#&gt; 30          NA          NA  8.2003387</div><div class='input'>
<span class='co'># works with NA</span>
<span class='no'>stocksm</span>$<span class='no'>price</span>[<span class='fu'><a href='https://rdrr.io/r/base/sample.html'>sample</a></span>(<span class='fl'>1</span>:<span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='no'>stocksm</span>), <span class='fl'>5</span>)] <span class='kw'>=</span> <span class='fl'>NA</span>
<span class='no'>stocksm</span> <span class='kw'>%&gt;%</span> <span class='fu'>spread2</span>(<span class='no'>stock</span>, <span class='no'>price</span>)</div><div class='output co'>#&gt;              X           Y         Z
#&gt; 1  -0.69470698  0.50663703  1.518558
#&gt; 2  -0.20791728          NA -2.009294
#&gt; 3  -1.26539635 -0.08574091 -1.332830
#&gt; 4   2.16895597          NA -4.074302
#&gt; 5   1.20796200 -0.45154197 -4.287165
#&gt; 6  -1.12310858  3.03294121  1.214115
#&gt; 7  -0.40288484          NA  1.792839
#&gt; 8  -0.46665535  1.16922750        NA
#&gt; 9   0.77996512  0.24770849  3.689070
#&gt; 10 -0.08336907          NA  8.200339</div><div class='input'><span class='no'>stocksm</span> <span class='kw'>%&gt;%</span> <span class='fu'>spread2</span>(<span class='no'>stock</span>, <span class='no'>price</span>, <span class='kw'>compact</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt;              X           Y         Z
#&gt; 1  -0.69470698          NA        NA
#&gt; 2  -0.20791728          NA        NA
#&gt; 3  -1.26539635          NA        NA
#&gt; 4   2.16895597          NA        NA
#&gt; 5   1.20796200          NA        NA
#&gt; 6  -1.12310858          NA        NA
#&gt; 7  -0.40288484          NA        NA
#&gt; 8  -0.46665535          NA        NA
#&gt; 9   0.77996512          NA        NA
#&gt; 10 -0.08336907          NA        NA
#&gt; 11          NA  0.50663703        NA
#&gt; 12          NA          NA        NA
#&gt; 13          NA -0.08574091        NA
#&gt; 14          NA          NA        NA
#&gt; 15          NA -0.45154197        NA
#&gt; 16          NA  3.03294121        NA
#&gt; 17          NA          NA        NA
#&gt; 18          NA  1.16922750        NA
#&gt; 19          NA  0.24770849        NA
#&gt; 20          NA          NA        NA
#&gt; 21          NA          NA  1.518558
#&gt; 22          NA          NA -2.009294
#&gt; 23          NA          NA -1.332830
#&gt; 24          NA          NA -4.074302
#&gt; 25          NA          NA -4.287165
#&gt; 26          NA          NA  1.214115
#&gt; 27          NA          NA  1.792839
#&gt; 28          NA          NA        NA
#&gt; 29          NA          NA  3.689070
#&gt; 30          NA          NA  8.200339</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#see-also">See also</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://m-clark.github.io'>Michael Clark <img src="man/figures/lh_hex.png" height="24" /></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


