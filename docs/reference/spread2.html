<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Spread without frustration — spread2 • ignore this!</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Spread without frustration — spread2" />

<meta property="og:description" content="Spread without frustration" />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidyext</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/m-clark">
    <span class="fa fa-github-alt"></span>
     
  </a>
</li>
<li>
  <a href="https://m-clark.github.io">
    <span class="fa fa-empire"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Spread without frustration</h1>
    <small class="dont-index">Source: <a href='https://github.com/m-clark/tidyext/blob/master/R/spread2.R'><code>R/spread2.R</code></a></small>
    <div class="hidden name"><code>spread2.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Spread without frustration</p>
    
    </div>

    <pre class="usage"><span class='fu'>spread2</span>(<span class='no'>data</span>, <span class='no'>key</span>, <span class='no'>value</span>, <span class='kw'>compact</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>fill</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>convert</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>drop</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>sep</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>See <code><a href='http://www.rdocumentation.org/packages/tidyr/topics/spread'>spread</a></code>.</p></td>
    </tr>
    <tr>
      <th>key</th>
      <td><p>See <code><a href='http://www.rdocumentation.org/packages/tidyr/topics/spread'>spread</a></code>.</p></td>
    </tr>
    <tr>
      <th>value</th>
      <td><p>See <code><a href='http://www.rdocumentation.org/packages/tidyr/topics/spread'>spread</a></code>.</p></td>
    </tr>
    <tr>
      <th>compact</th>
      <td><p>When you don't have a unique identifier there is more than one
way the output could be produced. Actually two. One is rather messy but may
in fact be what is desired. The other is more 'compact'. See the examples.</p></td>
    </tr>
    <tr>
      <th>fill</th>
      <td><p>See <code><a href='http://www.rdocumentation.org/packages/tidyr/topics/spread'>spread</a></code>.</p></td>
    </tr>
    <tr>
      <th>convert</th>
      <td><p>See <code><a href='http://www.rdocumentation.org/packages/tidyr/topics/spread'>spread</a></code>.</p></td>
    </tr>
    <tr>
      <th>drop</th>
      <td><p>See <code><a href='http://www.rdocumentation.org/packages/tidyr/topics/spread'>spread</a></code>.</p></td>
    </tr>
    <tr>
      <th>sep</th>
      <td><p>See <code><a href='http://www.rdocumentation.org/packages/tidyr/topics/spread'>spread</a></code>.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A data frame with 'wide' format.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Anyone that uses spread more than once has likely come across the
  duplicate identifiers problem.  This function works just like select (it's
  mostly just a wrapper) except that it works when you don't have unique
  identifiers, which is actually quite often.  The only additional
  functionality regards the <code>compact</code> argument. See the examples for
  what this means.</p>
<p>For more, see
  <a href='https://stackoverflow.com/questions/45898614/how-to-spread-columns-with-duplicate-identifiers?rq=1'>StackOverflow</a>
   for example, or the numerous repeated issue brought up at the
  <a href='https://github.com/tidyverse/tidyr/issues'>tidyr GitHub issues
  page</a>. Search for 'spread duplicate' for all, not just open issues (direct link couldn't be handled
  by R documentation).</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='http://www.rdocumentation.org/packages/tidyr/topics/spread'>spread</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>library</span>(<span class='no'>tidyext</span>); <span class='fu'>library</span>(<span class='no'>tidyr</span>)

<span class='co'># initial example from spread</span>
<span class='no'>stocks_init</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(
<span class='kw'>time</span> <span class='kw'>=</span> <span class='fu'>as.Date</span>(<span class='st'>'2009-01-01'</span>) + <span class='fl'>0</span>:<span class='fl'>9</span>,
<span class='kw'>X</span> <span class='kw'>=</span> <span class='fu'>rnorm</span>(<span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>1</span>),
<span class='kw'>Y</span> <span class='kw'>=</span> <span class='fu'>rnorm</span>(<span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>2</span>),
<span class='kw'>Z</span> <span class='kw'>=</span> <span class='fu'>rnorm</span>(<span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>4</span>)
)

<span class='co'># a very common situation</span>
<span class='no'>stocks</span> <span class='kw'>&lt;-</span> <span class='fu'>data.frame</span>(
  <span class='kw'>X</span> <span class='kw'>=</span> <span class='fu'>rnorm</span>(<span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>1</span>),
  <span class='kw'>Y</span> <span class='kw'>=</span> <span class='fu'>rnorm</span>(<span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>2</span>),
  <span class='kw'>Z</span> <span class='kw'>=</span> <span class='fu'>rnorm</span>(<span class='fl'>10</span>, <span class='fl'>0</span>, <span class='fl'>4</span>)
)


<span class='no'>stocksm_init</span> <span class='kw'>&lt;-</span> <span class='no'>stocks_init</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/tidyr/topics/gather'>gather</a></span>(<span class='no'>stock</span>, <span class='no'>price</span>, -<span class='no'>time</span>)
<span class='no'>stocksm_init</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/tidyr/topics/spread'>spread</a></span>(<span class='no'>stock</span>, <span class='no'>price</span>)    <span class='co'># works fine</span></div><div class='output co'>#&gt;          time          X          Y          Z
#&gt; 1  2009-01-01  0.3224827  0.9614505  4.7263023
#&gt; 2  2009-01-02  0.3666744  3.2088147  0.7935684
#&gt; 3  2009-01-03  1.1298352 -3.0300491 -1.6016210
#&gt; 4  2009-01-04 -0.9414981 -2.8320478  2.4646171
#&gt; 5  2009-01-05  0.2178376  1.7535547  7.8966270
#&gt; 6  2009-01-06  1.4154123  1.2482648  7.5386493
#&gt; 7  2009-01-07 -0.3837330  4.2245546 -6.3544822
#&gt; 8  2009-01-08 -0.1740864 -0.7122488 -2.1596927
#&gt; 9  2009-01-09 -0.2217445 -2.1289284 -4.6778459
#&gt; 10 2009-01-10 -1.0095287  2.1542331  2.2364240</div><div class='input'><span class='no'>stocksm</span> <span class='kw'>&lt;-</span> <span class='no'>stocks</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/tidyr/topics/gather'>gather</a></span>(<span class='no'>stock</span>, <span class='no'>price</span>)
<span class='co'># stocksm %&gt;% spread(stock, price)       # annoying</span>
<span class='no'>stocksm</span> <span class='kw'>%&gt;%</span> <span class='fu'>spread2</span>(<span class='no'>stock</span>, <span class='no'>price</span>)        <span class='co'># works fine</span></div><div class='output co'>#&gt;              X          Y          Z
#&gt; 1  -1.81934725  0.1440514 -0.6771203
#&gt; 2   0.39334397  4.2528891  1.1801190
#&gt; 3   0.04213411 -2.9523938  5.0653623
#&gt; 4   1.17966418  0.8157770 -4.5413730
#&gt; 5  -0.25692118  2.7879556 -4.5242152
#&gt; 6  -1.05633610  0.7205566  0.4399735
#&gt; 7   0.19877721  1.3091005  3.4116216
#&gt; 8   0.65053355  2.1043108 -0.9373514
#&gt; 9   0.34391334 -3.9591103  8.3467543
#&gt; 10  1.47753231  2.4167712 -0.4436775</div><div class='input'><span class='no'>stocksm</span> <span class='kw'>%&gt;%</span> <span class='fu'>spread2</span>(<span class='no'>stock</span>, <span class='no'>price</span>, <span class='kw'>compact</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt;              X          Y          Z
#&gt; 1  -1.81934725         NA         NA
#&gt; 2   0.39334397         NA         NA
#&gt; 3   0.04213411         NA         NA
#&gt; 4   1.17966418         NA         NA
#&gt; 5  -0.25692118         NA         NA
#&gt; 6  -1.05633610         NA         NA
#&gt; 7   0.19877721         NA         NA
#&gt; 8   0.65053355         NA         NA
#&gt; 9   0.34391334         NA         NA
#&gt; 10  1.47753231         NA         NA
#&gt; 11          NA  0.1440514         NA
#&gt; 12          NA  4.2528891         NA
#&gt; 13          NA -2.9523938         NA
#&gt; 14          NA  0.8157770         NA
#&gt; 15          NA  2.7879556         NA
#&gt; 16          NA  0.7205566         NA
#&gt; 17          NA  1.3091005         NA
#&gt; 18          NA  2.1043108         NA
#&gt; 19          NA -3.9591103         NA
#&gt; 20          NA  2.4167712         NA
#&gt; 21          NA         NA -0.6771203
#&gt; 22          NA         NA  1.1801190
#&gt; 23          NA         NA  5.0653623
#&gt; 24          NA         NA -4.5413730
#&gt; 25          NA         NA -4.5242152
#&gt; 26          NA         NA  0.4399735
#&gt; 27          NA         NA  3.4116216
#&gt; 28          NA         NA -0.9373514
#&gt; 29          NA         NA  8.3467543
#&gt; 30          NA         NA -0.4436775</div><div class='input'>
<span class='co'># works with NA</span>
<span class='no'>stocksm</span>$<span class='no'>price</span>[<span class='fu'>sample</span>(<span class='fl'>1</span>:<span class='fu'>nrow</span>(<span class='no'>stocksm</span>), <span class='fl'>5</span>)] <span class='kw'>=</span> <span class='fl'>NA</span>
<span class='no'>stocksm</span> <span class='kw'>%&gt;%</span> <span class='fu'>spread2</span>(<span class='no'>stock</span>, <span class='no'>price</span>)</div><div class='output co'>#&gt;             X          Y          Z
#&gt; 1  -1.8193472         NA -0.6771203
#&gt; 2   0.3933440  4.2528891  1.1801190
#&gt; 3          NA -2.9523938  5.0653623
#&gt; 4          NA  0.8157770 -4.5413730
#&gt; 5  -0.2569212  2.7879556         NA
#&gt; 6  -1.0563361  0.7205566  0.4399735
#&gt; 7   0.1987772  1.3091005  3.4116216
#&gt; 8   0.6505336  2.1043108 -0.9373514
#&gt; 9   0.3439133 -3.9591103  8.3467543
#&gt; 10  1.4775323         NA -0.4436775</div><div class='input'><span class='no'>stocksm</span> <span class='kw'>%&gt;%</span> <span class='fu'>spread2</span>(<span class='no'>stock</span>, <span class='no'>price</span>, <span class='kw'>compact</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt;             X          Y          Z
#&gt; 1  -1.8193472         NA         NA
#&gt; 2   0.3933440         NA         NA
#&gt; 3          NA         NA         NA
#&gt; 4          NA         NA         NA
#&gt; 5  -0.2569212         NA         NA
#&gt; 6  -1.0563361         NA         NA
#&gt; 7   0.1987772         NA         NA
#&gt; 8   0.6505336         NA         NA
#&gt; 9   0.3439133         NA         NA
#&gt; 10  1.4775323         NA         NA
#&gt; 11         NA         NA         NA
#&gt; 12         NA  4.2528891         NA
#&gt; 13         NA -2.9523938         NA
#&gt; 14         NA  0.8157770         NA
#&gt; 15         NA  2.7879556         NA
#&gt; 16         NA  0.7205566         NA
#&gt; 17         NA  1.3091005         NA
#&gt; 18         NA  2.1043108         NA
#&gt; 19         NA -3.9591103         NA
#&gt; 20         NA         NA         NA
#&gt; 21         NA         NA -0.6771203
#&gt; 22         NA         NA  1.1801190
#&gt; 23         NA         NA  5.0653623
#&gt; 24         NA         NA -4.5413730
#&gt; 25         NA         NA         NA
#&gt; 26         NA         NA  0.4399735
#&gt; 27         NA         NA  3.4116216
#&gt; 28         NA         NA -0.9373514
#&gt; 29         NA         NA  8.3467543
#&gt; 30         NA         NA -0.4436775</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Michael Clark.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

